{% extends "base.html" %}
{% block content %}
<div class="container">
  <div class="row mb-4">
    <div class="col-12 text-center">
      <h1 class="h3 text-primary">Dashboard</h1>
      <p class="text-muted">Overview of your active notes.</p>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Total Notes 📝</h6>
          <h2 class="text-primary">{{ total }}</h2>
          <p class="small text-muted">Notes are stored securely and auto-expire after the set time.</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Total Notes Deleted 🗑️</h6>
          <h2 class="text-primary">{{ total_deleted }}</h2>
          <p class="small text-muted">Notes that have been deleted manually or expired.</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Most Active Day 📅</h6>
          <h2 class="text-primary">{{ most_active_day }}</h2>
          <p class="small text-muted">The day with the highest number of notes created.</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Notes Created in the Last 24 Hours ⏰</h6>
          <h2 class="text-primary">{{ notes_last_24_hours }}</h2>
          <p class="small text-muted">Notes created within the past 24 hours.</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Notes Expired Automatically ⌛</h6>
          <h2 class="text-primary">{{ notes_expired }}</h2>
          <p class="small text-muted">Notes that expired without manual deletion.</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Most Shared Note 🔗</h6>
          <h2 class="text-primary">{{ most_shared_note }}</h2>
          <p class="small text-muted">The note shared the most times.</p>
        </div>
      </div>
    </div>

    <div class="col-lg-4 mb-3">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <h6 class="text-muted">Peak Usage Time 🌟</h6>
          <h2 class="text-primary">{{ peak_usage_time }}</h2>
          <p class="small text-muted">The time period with the highest activity.</p>
        </div>
      </div>
    </div>

    <div class="col-lg-8 mb-3">
      <div class="card shadow-sm">
        <div class="card-body">
          <h6 class="text-muted">Recent Notes</h6>
          <div class="table-responsive">
            <table class="table table-sm table-hover">
              <thead>
                <tr>
                  <th>Token</th>
                  <th>Created</th>
                  <th>TTL (s)</th>
                  <th>Flags</th>
                </tr>
              </thead>
              <tbody>
                {% for n in notes %}
                <tr>
                  <td class="font-monospace">{{ n.token_mask }}</td>
                  <td>{{ n.created_at or 'n/a' }}</td>
                  <td>{{ n.ttl_seconds }}</td>
                  <td>
                    {% if n.password_protected %}<span class="badge bg-warning text-dark">Password</span>{% endif %}
                    {% if n.burn_after_read %}<span class="badge bg-danger">Burn</span>{% endif %}
                    {% if n.markdown %}<span class="badge bg-info text-dark">Markdown</span>{% endif %}
                  </td>
                </tr>
                {% else %}
                <tr><td colspan="4" class="text-muted">No notes found.</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
